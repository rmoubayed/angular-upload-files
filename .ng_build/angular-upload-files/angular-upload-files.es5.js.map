{"version":3,"file":"angular-upload-files.es5.js","sources":["../ts/angular-upload-files.ts","../ts/src/app/uploader/uploader/uploader.module.ts","../ts/src/app/uploader/uploader/uploader.component.ts","../ts/src/app/uploader/uploader/upload.service.ts"],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport {UploadParams,ExtraParams,UploaderModule,UploadService} from './public_api';\n\nexport {UploaderComponent as Éµa} from './src/app/uploader/uploader/uploader.component';","import { UploaderComponent, UploadParams } from './uploader.component';\nimport { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { UploadService } from './upload.service';\nexport class UploaderModule {\n/**\n * Guaranteed singletons for provided Services across App.\n * \n * @return {?} An Angular Module with Providers\n */\nstatic forRoot(): ModuleWithProviders {\n        return {\n          ngModule: UploaderModule,\n          providers: [\n            UploadService,\n          ]\n        };\n      }\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  imports: [\n    CommonModule\n  ],\n  declarations: [\n    UploaderComponent,\n  ],\n  exports: [\n    UploaderComponent\n  ]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction UploaderModule_tsickle_Closure_declarations() {\n/** @type {?} */\nUploaderModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nUploaderModule.ctorParameters;\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { UploadService } from './upload.service';\nimport { HttpClient, HttpHeaders, HttpParams, HttpEventType } from '@angular/common/http';\nimport { Component, OnInit, Input, Output, EventEmitter, OnDestroy, AfterViewInit } from '@angular/core';\nimport { Subscription } from 'rxjs/Subscription';\n\nexport interface UploadParams {\n  formDataPropertyName: string;\n  extraParams : ExtraParams[];\n}\nexport interface ExtraParams {\n  paramValueIsFromFile: boolean;\n  paramName: string;\n  paramValue: any;\n}\nexport class UploaderComponent implements OnInit, OnDestroy, AfterViewInit {\n   buttonText: string = 'Choose File';\n   postUrl: string;\n   imagesRemovable: boolean;\n   usingImages: boolean;\n   buttonClass: string;\n   imageWidth: string;\n   multiple: boolean;\n   showImagesOnAdd: boolean;\n   id: number;\n   uploadParams: UploadParams;\n   onFilesSelected : EventEmitter<any> = new EventEmitter<any>();\n   onUploadComplete : EventEmitter<any> = new EventEmitter<any>();\n   onImageRemoved : EventEmitter<any> = new EventEmitter<any>();\n   onFileRemoved : EventEmitter<any> = new EventEmitter<any>();\n\n  currentSourceImageIndex : number;\n\n  images: any[] = [];\n  files : File[] = [];\nprivate subscriptions : Subscription[] = [];\n/**\n * @param {?} http\n * @param {?} uploadService\n */\nconstructor(private http : HttpClient,\nprivate uploadService : UploadService) { }\n/**\n * @return {?}\n */\nngOnInit() {\n    this.subscriptions.push(this.uploadService.startUpload.subscribe(\n      (files)=>{\n        for(let /** @type {?} */ i=0; i<files.length;i++) {\n          this.onUpload(files[i]);\n        }\n      }\n    ))\n    this.subscriptions.push(this.uploadService.clearFiles.subscribe((data:any)=>{\n      let /** @type {?} */ len = JSON.parse(JSON.stringify(this.images.length));\n      if(data.id === this.id) {\n        for(let /** @type {?} */ i=0;i<this.files.length;i++) {\n          this.removeFile(i);\n        } \n      }\n    }))\n    this.subscriptions.push(this.uploadService.removeImage.subscribe((data:any)=>{\n      // console.log('removing');\n      if(data.id === this.id) {\n        this.removeImage(data.index);\n      }\n    }))\n    this.subscriptions.push(this.uploadService.removeFile.subscribe((data:any)=>{\n      // console.log('removing');\n      if(data.id === this.id) {\n        this.removeImage(data.index);\n      }\n    }))\n  }\n/**\n * @return {?}\n */\nngAfterViewInit() {\n    this.addButtonStyle(this.buttonClass);\n  }\n/**\n * @param {?} file\n * @return {?}\n */\ngetBase64(file) {\n    return new Promise((resolve, reject) => {\n      const /** @type {?} */ reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = error => reject(error);\n    });\n  }\n/**\n * @param {?} event\n * @return {?}\n */\nonFileSelected(event) {\n    this.clearFiles();\n    if(event && event.target && event.target.files) {\n      let /** @type {?} */ files = /** @type {?} */(( <FileList> event.target.files));\n      if(this.usingImages) {\n        for(let /** @type {?} */ i=0; i<files.length;i++) {\n          console.log(files[i], event);\n          this.getBase64(files[i]).then(\n            data => {\n              this.images.push(data);\n              if(this.images.length === files.length) {\n                this.onFilesSelected.emit({files: files, base64s: this.images});\n              }\n            }\n          );\n        }\n      } else {\n        this.onFilesSelected.emit({files: files});\n      }\n    }\n  }\n/**\n * @param {?} file\n * @return {?}\n */\nonUpload(file : File) {\n    let /** @type {?} */ fd = new FormData();\n    fd.append(this.uploadParams.formDataPropertyName, file, file.name);\n    let /** @type {?} */ params = new HttpParams();;\n    this.uploadParams.extraParams.forEach(\n      param => {\n        params = params.set(param.paramName, (param.paramValueIsFromFile ? file[param.paramValue] : param.paramValue));\n      }\n    )\n    this.http.post(this.postUrl, fd, {params: params, reportProgress:true, observe:'events'})\n    .subscribe(\n      (event) => {\n        if(event.type === HttpEventType.UploadProgress) {\n          // console.log('Upload Progress:', Math.round(event.loaded / event.total*100)+'%' );\n          this.uploadService.currentUploadProgress.next((event.loaded / event.total*100));\n        } else if( event.type === HttpEventType.Response) {\n          // console.log('Response: ', event);\n          this.onUploadComplete.emit({response: event, file: file});\n        }\n      }\n    )\n  }\n/**\n * @param {?} index\n * @return {?}\n */\nremoveImage(index) {\n    if(this.imagesRemovable && this.usingImages) {\n      this.files.splice(index, 1);\n      this.images.splice(index, 1);\n      this.onImageRemoved.emit();\n      ( /** @type {?} */((<HTMLInputElement>document.getElementById('fileInput')))).value = \"\";\n    }\n  }\n/**\n * @param {?} index\n * @return {?}\n */\nremoveFile(index) {\n    this.files.splice(index, 1);\n    this.onFileRemoved.emit();\n    ( /** @type {?} */((<HTMLInputElement>document.getElementById('fileInput')))).value = \"\";\n  }\n/**\n * @return {?}\n */\nclearFiles() {\n    this.files = /** @type {?} */(( <File[]>[]));\n    this.images = [];\n  }\n/**\n * @param {?} className\n * @return {?}\n */\naddButtonStyle(className : string) {\n    if(className.indexOf(' ') !== -1) {\n      let /** @type {?} */ classes = className.split(' ');\n      for(let /** @type {?} */ i=0; i<classes.length;i++) {\n        if(!( /** @type {?} */((<HTMLButtonElement>document.getElementById('uploadBtn'+(this.id!==undefined?this.id:''))))).classList.contains(classes[i])) {\n          ( /** @type {?} */((<HTMLButtonElement>document.getElementById('uploadBtn'+(this.id!==undefined?this.id:''))))).classList.add(classes[i]); \n        }  \n      }\n    } else {\n      if(!( /** @type {?} */((<HTMLButtonElement>document.getElementById('uploadBtn'+(this.id!==undefined?this.id:''))))).classList.contains(className)) {\n        ( /** @type {?} */((<HTMLButtonElement>document.getElementById('uploadBtn'+(this.id!==undefined?this.id:''))))).classList.add(className); \n      }  \n    }\n  }\n/**\n * @param {?} event\n * @return {?}\n */\nsortImages(event) {\n    // alert();\n    console.log(event);\n    // let targetId = event.toElement.id;\n    // if(targetId.includes('drag')) {\n    //   let targetIndex = +targetId.replace('drag', '');\n    //   let temp = this.images[targetIndex];\n    //   this.images[targetIndex] = this.images[this.currentSourceImageIndex];\n    //   this.images[this.currentSourceImageIndex] = temp;\n    //   this.files[targetIndex] = this.files[this.currentSourceImageIndex];\n    //   this.files[this.currentSourceImageIndex] = temp;\n    //   this.currentSourceImageIndex = undefined;\n    //   this.resetOpacity();\n    // }\n  }\n/**\n * @param {?} event\n * @param {?} index\n * @return {?}\n */\ncheckPos(event, index) {\n    console.log('starting');\n    if(!this.currentSourceImageIndex) {\n      this.currentSourceImageIndex = index;\n    }\n  }\n/**\n * @param {?} index\n * @param {?} opacity\n * @return {?}\n */\nopacitize(index, opacity){\n    console.log('OPACCCC');\n    if(index !== this.currentSourceImageIndex) {\n      console.log(index);\n      let /** @type {?} */ img = /** @type {?} */(( <HTMLImageElement>document.getElementById('drag'+index)));\n      img.style.opacity = opacity;\n    }\n  }\n/**\n * @return {?}\n */\nresetOpacity() {\n    // for(let i=0; i<this.urls.length;i++) {\n    //   let img = <HTMLImageElement>document.getElementById('drag'+i);\n    //   img.style.opacity = '1';     \n    // }\n  }\n/**\n * @return {?}\n */\nngOnDestroy() {\n    this.subscriptions.forEach( sub => sub.unsubscribe());\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'app-uploader',\n  template: `\n    <input style=\"display: none\" type=\"file\" [multiple]=\"multiple\" (change)=\"onFileSelected($event)\" id=\"fileInput\" #fileInput>\n    <button id=\"uploadBtn{{id!==undefined?id:''}}\" (click)=\"fileInput.click()\">{{buttonText}}</button>\n    <div class=\"imageContainer\" *ngIf=\"showImagesOnAdd\" >\n      <img\n      id=\"drag{{v}}\"\n      (click)=\"removeImage(v)\"\n      *ngFor=\"let image of images; let v=index\"                                 \n      [ngStyle]=\"{'width' : imageWidth}\" [src]=\"image\" alt=\"noImg\">\n    </div>\n  `,\n  styles: [`\n    .imageContainer {\n        display: block;\n    }\n  `]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: HttpClient, },\n{type: UploadService, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'buttonText': [{ type: Input },],\n'postUrl': [{ type: Input },],\n'imagesRemovable': [{ type: Input },],\n'usingImages': [{ type: Input },],\n'buttonClass': [{ type: Input },],\n'imageWidth': [{ type: Input },],\n'multiple': [{ type: Input },],\n'showImagesOnAdd': [{ type: Input },],\n'id': [{ type: Input },],\n'uploadParams': [{ type: Input },],\n'onFilesSelected': [{ type: Output },],\n'onUploadComplete': [{ type: Output },],\n'onImageRemoved': [{ type: Output },],\n'onFileRemoved': [{ type: Output },],\n};\n}\n\nfunction UploaderComponent_tsickle_Closure_declarations() {\n/** @type {?} */\nUploaderComponent.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nUploaderComponent.ctorParameters;\n/** @type {?} */\nUploaderComponent.propDecorators;\n/** @type {?} */\nUploaderComponent.prototype.buttonText;\n/** @type {?} */\nUploaderComponent.prototype.postUrl;\n/** @type {?} */\nUploaderComponent.prototype.imagesRemovable;\n/** @type {?} */\nUploaderComponent.prototype.usingImages;\n/** @type {?} */\nUploaderComponent.prototype.buttonClass;\n/** @type {?} */\nUploaderComponent.prototype.imageWidth;\n/** @type {?} */\nUploaderComponent.prototype.multiple;\n/** @type {?} */\nUploaderComponent.prototype.showImagesOnAdd;\n/** @type {?} */\nUploaderComponent.prototype.id;\n/** @type {?} */\nUploaderComponent.prototype.uploadParams;\n/** @type {?} */\nUploaderComponent.prototype.onFilesSelected;\n/** @type {?} */\nUploaderComponent.prototype.onUploadComplete;\n/** @type {?} */\nUploaderComponent.prototype.onImageRemoved;\n/** @type {?} */\nUploaderComponent.prototype.onFileRemoved;\n/** @type {?} */\nUploaderComponent.prototype.currentSourceImageIndex;\n/** @type {?} */\nUploaderComponent.prototype.images;\n/** @type {?} */\nUploaderComponent.prototype.files;\n/** @type {?} */\nUploaderComponent.prototype.subscriptions;\n/** @type {?} */\nUploaderComponent.prototype.http;\n/** @type {?} */\nUploaderComponent.prototype.uploadService;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs/Subject';\nexport class UploadService {\n    startUpload : Subject<any> = new Subject<any>();\n    currentUploadProgress: Subject<any> = new Subject<any>();\n    clearImages: Subject<any> = new Subject<any>();\n    clearFiles: Subject<any> = new Subject<any>();\n    removeFile: Subject<any> = new Subject<any>();\n    removeImage: Subject<any> = new Subject<any>();\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction UploadService_tsickle_Closure_declarations() {\n/** @type {?} */\nUploadService.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nUploadService.ctorParameters;\n/** @type {?} */\nUploadService.prototype.startUpload;\n/** @type {?} */\nUploadService.prototype.currentUploadProgress;\n/** @type {?} */\nUploadService.prototype.clearImages;\n/** @type {?} */\nUploadService.prototype.clearFiles;\n/** @type {?} */\nUploadService.prototype.removeFile;\n/** @type {?} */\nUploadService.prototype.removeImage;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":["http","Subject"],"mappings":"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"}